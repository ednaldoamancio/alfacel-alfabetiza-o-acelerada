<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Alfacel ‚Äì Vogais M√°gicas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <style>
        :root {
            --bg: #fdf6e3;
            --primary: #ff6f61;
            --secondary: #ffca28;
            --accent-blue: #42a5f5;
            --accent-green: #66bb6a;
            --accent-purple: #ab47bc;
            --text: #3e2723;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #fff3e0 0, #fdf6e3 40%, #ffe0b2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .app {
            width: 100%;
            max-width: 900px;
            min-height: 100vh;
            padding: 16px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .card {
            background: rgba(255,255,255,0.96);
            border-radius: 24px;
            box-shadow:
                0 18px 45px rgba(0,0,0,0.16),
                0 0 0 6px rgba(255,255,255,0.8);
            padding: 20px 16px 24px;
            text-align: center;
        }

        @media (min-width: 720px) {
            .card {
                padding: 28px 32px 32px;
            }
        }

        .title {
            font-size: clamp(24px, 5vw, 32px);
            color: var(--primary);
            font-weight: 800;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }

        .subtitle {
            font-size: 15px;
            color: var(--text);
            opacity: 0.85;
            margin-bottom: 18px;
        }

        .stage {
            min-height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .big-letter {
            font-size: clamp(120px, 40vw, 220px);
            font-weight: 900;
            line-height: 1;
            color: var(--primary);
            text-shadow:
                0 0 0 rgba(0,0,0,0.12),
                0 14px 25px rgba(0,0,0,0.18);
            opacity: 0;
            transform: scale(0.1) translateY(40px);
        }

        .big-letter.flash-in {
            animation: flashIn 1.1s ease-out forwards;
        }

        @keyframes flashIn {
            0% {
                opacity: 0;
                transform: scale(0.1) translateY(40px);
            }
            40% {
                opacity: 1;
                transform: scale(1.1) translateY(0);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .big-letter.full-zoom {
            animation: fullZoom 0.6s ease-out forwards;
        }

        @keyframes fullZoom {
            0% {
                opacity: 0;
                transform: scale(0.1) translateY(40px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .object-card {
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 16px;
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.14);
            font-size: 16px;
            color: var(--text);
            display: none;
            align-items: center;
            gap: 8px;
        }

        .object-card.show {
            display: inline-flex;
            animation: cardPop 0.45s ease-out;
        }

        @keyframes cardPop {
            0% {
                opacity: 0;
                transform: translate(-50%, 12px) scale(0.6);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, 0) scale(1);
            }
        }

        .object-emoji {
            font-size: 26px;
        }

        .object-text {
            font-weight: 700;
        }

        .vowel-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .vowel-btn {
            width: 72px;
            height: 72px;
            border-radius: 20px;
            border: none;
            font-size: 40px;
            font-weight: 900;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.18);
            transform: translateY(0);
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .vowel-btn:active {
            transform: translateY(3px) scale(0.96);
            box-shadow: 0 4px 12px rgba(0,0,0,0.18);
        }

        .vowel-A { background: linear-gradient(135deg, #ff5252, #ff8a65); }
        .vowel-E { background: linear-gradient(135deg, #ffca28, #ffeb3b); color: #5d4037; }
        .vowel-I { background: linear-gradient(135deg, #42a5f5, #29b6f6); }
        .vowel-O { background: linear-gradient(135deg, #66bb6a, #9ccc65); }
        .vowel-U { background: linear-gradient(135deg, #ab47bc, #ec407a); }

        .hint {
            margin-top: 8px;
            font-size: 13px;
            color: rgba(62,39,35,0.8);
        }

        .controls {
            margin-top: 14px;
            font-size: 12px;
            color: rgba(62,39,35,0.7);
        }

        .controls kbd {
            background: rgba(0,0,0,0.06);
            border-radius: 5px;
            padding: 2px 6px;
            font-size: 11px;
        }

        .btn-primary {
            margin-top: 12px;
            padding: 8px 16px;
            border-radius: 999px;
            border: none;
            background: var(--accent-blue);
            color: #fff;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 8px 18px rgba(66,165,245,0.5);
        }

        .btn-primary:active {
            transform: translateY(2px);
            box-shadow: 0 4px 10px rgba(66,165,245,0.5);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(255,255,255,0.9);
            border-radius: 999px;
            padding: 4px 10px;
            font-size: 11px;
            color: rgba(62,39,35,0.8);
            margin-bottom: 6px;
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--secondary);
            box-shadow: 0 0 0 4px rgba(255,202,40,0.4);
        }
    </style>
</head>
<body>
<div class="app">
    <div class="card">
        <div class="badge">
            <span class="badge-dot"></span>
            <span>Fase 1 ‚Äì Vogais em bast√£o (mai√∫sculas)</span>
        </div>

        <h1 class="title">Alfacel ‚Äì Vogais M√°gicas</h1>
        <p class="subtitle" id="subtitle">
            Observe a m√°gica: as vogais v√£o aparecer bem grandonas e falar o seu nome!
        </p>

        <div class="stage">
            <div id="bigLetter" class="big-letter"></div>

            <div id="objectCard" class="object-card">
                <span id="objectEmoji" class="object-emoji">‚úàÔ∏è</span>
                <span id="objectText" class="object-text">A de avi√£o</span>
            </div>
        </div>

        <div id="vowelRow" class="vowel-row" style="opacity:0; pointer-events:none;">
            <button class="vowel-btn vowel-A" data-vogal="A">A</button>
            <button class="vowel-btn vowel-E" data-vogal="E">E</button>
            <button class="vowel-btn vowel-I" data-vogal="I">I</button>
            <button class="vowel-btn vowel-O" data-vogal="O">O</button>
            <button class="vowel-btn vowel-U" data-vogal="U">U</button>
        </div>

        <p class="hint" id="hintText">
            Espere a apresenta√ß√£o das vogais. Depois, toque em uma delas para ver a transforma√ß√£o!
        </p>

        <p class="controls">
            Voc√™ pode tocar, clicar ou usar o teclado: <kbd>A</kbd>, <kbd>E</kbd>, <kbd>I</kbd>, <kbd>O</kbd>, <kbd>U</kbd>.
        </p>

        <button class="btn-primary" id="btnReplay">
            üîÅ Assistir apresenta√ß√£o de novo
        </button>
    </div>
</div>

<script>
    const synth = window.speechSynthesis;
    let voces = [];
    let vozPtBr = null;

    function carregarVozes() {
        voces = synth.getVoices();
        vozPtBr = voces.find(v => v.lang && v.lang.toLowerCase().startsWith("pt-br")) || null;
    }

    carregarVozes();
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = carregarVozes;
    }

    const sonsFonemicos = {
        "A": "√°",
        "E": "√©",
        "I": "√≠",
        "O": "√≥",
        "U": "√∫"
    };

    const dadosObjetos = {
        "A": { emoji: "‚úàÔ∏è", texto: "A de avi√£o", somObjeto: "som de avi√£o" },
        "E": { emoji: "üêò", texto: "E de elefante", somObjeto: "som de elefante" },
        "I": { emoji: "ü¶é", texto: "I de iguana", somObjeto: "som de iguana" },
        "O": { emoji: "üêª", texto: "O de urso", somObjeto: "som de urso" },
        "U": { emoji: "ü¶Ñ", texto: "U de unic√≥rnio", somObjeto: "som de unic√≥rnio" }
    };

    function falarTexto(texto, rate = 0.9, pitch = 1.1) {
        if (!texto) return;
        synth.cancel();
        const utter = new SpeechSynthesisUtterance(texto);
        utter.lang = "pt-BR";
        if (vozPtBr) utter.voice = vozPtBr;
        utter.rate = rate;
        utter.pitch = pitch;
        synth.speak(utter);
    }

    function falarSomFonemico(letra) {
        const som = sonsFonemicos[letra];
        if (!som) return;
        falarTexto(som, 0.7, 1.3);
    }

    const sequenciaVogais = ["A", "E", "I", "O", "U"];

    const bigLetterEl = document.getElementById("bigLetter");
    const vowelRowEl = document.getElementById("vowelRow");
    const subtitleEl = document.getElementById("subtitle");
    const hintEl = document.getElementById("hintText");
    const objectCardEl = document.getElementById("objectCard");
    const objectEmojiEl = document.getElementById("objectEmoji");
    const objectTextEl = document.getElementById("objectText");
    const btnReplay = document.getElementById("btnReplay");

    let apresentacaoConcluida = false;
    let animando = false;

    function apresentarSequencia() {
        apresentacaoConcluida = false;
        animando = true;
        vowelRowEl.style.opacity = "0";
        vowelRowEl.style.pointerEvents = "none";
        objectCardEl.classList.remove("show");
        bigLetterEl.textContent = "";
        bigLetterEl.style.opacity = "0";
        bigLetterEl.classList.remove("flash-in", "full-zoom");
        subtitleEl.textContent = "Observe a m√°gica: as vogais v√£o aparecer bem grandonas e falar o seu nome!";
        hintEl.textContent = "Espere a apresenta√ß√£o das vogais. Depois, toque em uma delas para ver a transforma√ß√£o!";

        let index = 0;

        function mostrarProxima() {
            if (index >= sequenciaVogais.length) {
                bigLetterEl.textContent = "";
                bigLetterEl.style.opacity = "0";
                apresentacaoConcluida = true;
                animando = false;
                mostrarFilaVogais();
                return;
            }

            const letra = sequenciaVogais[index];
            bigLetterEl.textContent = letra;
            bigLetterEl.classList.remove("flash-in");
            void bigLetterEl.offsetWidth;
            bigLetterEl.classList.add("flash-in");

            setTimeout(() => {
                falarSomFonemico(letra);

                setTimeout(() => {
                    index++;
                    mostrarProxima();
                }, 1000);
            }, 300);
        }

        mostrarProxima();
    }

    function mostrarFilaVogais() {
        vowelRowEl.style.opacity = "1";
        vowelRowEl.style.pointerEvents = "auto";
        subtitleEl.textContent = "Agora toque em uma vogal para ver a transforma√ß√£o!";
        hintEl.textContent = "Exemplo: toque no A para ver o A virar um avi√£o!";
    }

    function animarTransformacao(letra) {
        if (!apresentacaoConcluida || animando) return;
        animando = true;
        objectCardEl.classList.remove("show");

        bigLetterEl.textContent = letra;
        bigLetterEl.classList.remove("flash-in", "full-zoom");
        void bigLetterEl.offsetWidth;
        bigLetterEl.classList.add("full-zoom");

        setTimeout(() => {
            const dados = dadosObjetos[letra];
            if (dados) {
                objectEmojiEl.textContent = dados.emoji;
                objectTextEl.textContent = dados.texto;
                objectCardEl.classList.add("show");

                falarTexto(`${sonsFonemicos[letra]}. ${dados.texto}.`, 0.85, 1.1);

                setTimeout(() => {
                    falarTexto(dados.somObjeto, 1.1, 1.0);
                }, 1200);
            } else {
                falarSomFonemico(letra);
            }

            setTimeout(() => {
                bigLetterEl.classList.remove("full-zoom");
                objectCardEl.classList.remove("show");
                bigLetterEl.textContent = "";
                bigLetterEl.style.opacity = "0";
                animando = false;
            }, 3600);
        }, 150);
    }

    vowelRowEl.addEventListener("click", (e) => {
        const btn = e.target.closest(".vowel-btn");
        if (!btn) return;
        const letra = btn.getAttribute("data-vogal");
        animarTransformacao(letra);
    });

    document.addEventListener("keydown", (e) => {
        const letra = e.key.toUpperCase();
        if (sequenciaVogais.includes(letra)) {
            animarTransformacao(letra);
        }
    });

    btnReplay.addEventListener("click", () => {
        apresentarSequencia();
    });

    window.addEventListener("load", () => {
        apresentarSequencia();
    });
</script>
</body>
</html>

